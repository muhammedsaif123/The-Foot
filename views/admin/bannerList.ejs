<%- include('../layouts/header.ejs')%>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.css">
    <script src="cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <!-- Add the following JavaScript scripts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.js"></script>
<div class="container-xxl flex-grow-1 container-p-y">
    <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Banner List</span></h4>
<div class="card">
    <h5 class="card-header"></h5>
    <div class="table-responsive text-nowrap">
      <table class="table">
        <thead>
          <tr>
            <th>Header</th>
            <th>image</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
            <%
            if(banner.length>0){
                for(let i=0;i<banner.length;i++){
                    %>
                <tr>
                    <td><%=banner[i].header%></td>
                    <td><img src="/product/<%=banner[i].image%>" width="100px" alt="Banner Image"></td>
                    <td><%=banner[i].description%></td>
                    <td>
                        <a href="/admin/editBanner?id=<%=banner[i].id%>">
                        <div class="pricing mt-1">
                            <button  class="btn btn-success py-2 px-3" style="margin-bottom: 2px;">Edit</button>
                        </div>
                    </a>
                    </td>
                    <td>
                        <%if(banner[i].is_List==true){%>
                            <a href="#">
                                <div class="pricing mt-1">
                                    <button class="btn btn-danger py-2 px-3" style="margin-bottom: 2px;" onclick="listBanner('<%=banner[i].id%>')">List</button>
                                </div>
                            </a>
                        <%}else{%>
                            <a href="#">
                                <div class="pricing mt-1">
                                    <button class="btn btn-danger py-2 px-3" style="margin-bottom: 2px;" onclick="UnlistBanner('<%=banner[i].id%>')">Un List</button>
                                </div>
                            </a>
                    <%    }  %>
                        
                    </td>
                </tr>
                <%
                }
            }
            else{%>
                    %><p style="color: white;padding: 30px;font-family: Georgia, 'Times New Roman', Times, serif;">banner Not Found</p>
                    <%
                  }
                  %>
            
            
        </tbody>
      </table>
    </div>
</diV>
<script>
    function listBanner(id){
      Swal.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, List'
          }).then((result) => {
            
            if (result.isConfirmed ) {
              console.log('hiii');
              $.ajax({
                url: '/admin/bannerList',
             
                method: 'post',
                data: {
                  id: id
                },
                success: (response) => {
                  if (response.is_List) {
                    location.reload();
                  }
                },
                error: (error) => {
                  console.error(error);
                }
              });
            }
          });
    }
  
    function UnlistBanner(id){
      Swal.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, Un List'
          }).then((result) => {
            console.log(result,'hiii');
            if (result.isConfirmed) {
              $.ajax({
                url: '/admin/bannerUnList',
                method: 'post',
                data: {
                  id: id
                },
                success: (response) => {
                  if (response.is_List) {
                    location.reload();
                  }
                },
                error: (error) => {
                  console.error(error);
                }
              });
            }
          });
    }
  </script>