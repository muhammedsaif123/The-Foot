<%- include('../layouts/header.ejs')%>
<div class="content-wrapper">
    <!-- Content -->

    <div class="container-xxl flex-grow-1 container-p-y">
      <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Add Product</span></h4>

      <!-- Basic Layout & Basic with Icons -->
      <div class="row">
        <!-- Basic Layout -->
        <div class="col-xxl">
          <div class="card mb-4">
            <div class="card-body">
              <form method="post" id="myForm" enctype="multipart/form-data">
                <div class="row mb-3">
                  <label class="col-sm-2 col-form-label"  for="basic-default-name">Product Name</label>
                  <div class="col-sm-10">
                    <input type="text" name="product" class="form-control" id="name" placeholder="Enter Product Name"/>
                  </div>
                </div>

                <div class="row mb-3">
                    <label class="col-sm-2 col-form-label"  for="basic-default-name">image</label>
                    <div class="col-sm-10">
                        <input class="bt" style="height: 28px;width: 228px ; background-color: gray;color: white;" accept="Image/*" type="file"  name="Image"  multiple></div>

                  </div>
                  <div class="row mb-3">
                    <label class="col-sm-2 col-form-label"  for="basic-default-name">Price</label>
                    <div class="col-sm-3">
                      <input type="number"  name="price" class="form-control" id="price" placeholder="price" />
                    </div>
                    <label class="col-sm-2 col-form-label"  for="basic-default-name">stock</label>
                  <div class="col-sm-3">
                    <input type="number"  name="stockQuantity" class="form-control" id="stock" placeholder="Stock" />
                  </div>
                    
                </div>

                <div class="row mb-3">
                  
                  <label class="col-sm-2 col-form-label"  for="basic-default-name">Category</label>
                  <div class="col-sm-3">
                    <select
                      class="col-md-12 form-control" name="category" id="category">
                      <%
                      if(cat.length>0){
                        for(let i=0;i<cat.length;i++){
                          %>
                          <option><%=cat[i].categoryName%></option>
                          <%
                        }
                      }
                      %>
                    </select>
                    </div>
                </div>
            
                <div class="row mb-3">
                    <label class="col-sm-2 col-form-label"  for="basic-default-name">description</label>
                    <div class="col-sm-10">
                      <input type="text" name="description" class="form-control" id="description" placeholder="description" />
                    </div>
                </div>
                <div class="row justify-content-end">
                  <div class="col-sm-10">
                    <input type="submit" value="Add" class="btn btn-primary">
                    <%
                      if(typeof message !== 'undefined'){
                          %>
                          <h5 style="display: flex;width: 100%;justify-content: space-around;margin-top: 50px;font-family: Georgia, 'Times New Roman', Times, serif;color: green;"><%= message%></h5>
                          <%
                      }
                      %>
                      <%
                      if(typeof error !== 'undefined'){
                          %>
                          <h5 style="display: flex;width: 100%;justify-content: space-around;margin-top: 50px;font-family: Georgia, 'Times New Roman', Times, serif;color: red;"><%= error%></h5>
                          <%
                      }
                      %>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>

        <script>
     
    
          let name=document.getElementById("name")
          let image=document.getElementById("image")
          let price=document.getElementById("price")
          let stock=document.getElementById("stock")
          let category=document.getElementById("category")
          let description=document.getElementById("description")
          
    
          name.addEventListener("input",()=>{
            if(name.value.trim()==''){
              name.setCustomValidity("name cannot be null")
            }else if(name.value.trim().length<4){
              name.setCustomValidity("minimum 4 letters required")
            }
            else{
              name.setCustomValidity("")
            }
          })
          price.addEventListener("input",()=>{
            if (price.value.trim()==""){
              price.setCustomValidity("price cannot be null")
    
            }else{
              price.setCustomValidity("")
            }
          })
          discription.addEventListener("input",()=>{
            if(discription.value.trim()==""){
              discription.setCustomValidity("discription cannot be null")
            }else{
              discription.setCustomValidity("")
            }
          })
          stock.addEventListener("input",()=>{
            if(stock.value.trim()==""){
              stock.setCustomValidity("stock field cannot be empty")
            }else{
              stock.setCustomValidity("")
            }
          })
          const form = document.getElementById("myForm")
          form.addEventListener("submit",(event)=>{
            event.preventDefault();
            alert("Add Product")
            form.submit()
          })
         
        </script>